Generated html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProofMode React Native Integration Guide</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=IBM+Plex+Mono&display=swap" rel="stylesheet">
    <style>
        /* General Styles & Typography */
        body { font-family: 'Roboto', sans-serif; line-height: 1.6; color: #333; max-width: 800px; margin: 2rem auto; padding: 0 1rem; background-color: #ffffff; }
        h1, h2, h3 { font-family: 'Roboto', sans-serif; line-height: 1.2; margin-top: 1.8em; padding-bottom: 0.3em; }
        h1 { font-size: 2.5em; border-bottom: 2px solid #eaecef; }
        h2 { font-size: 1.8em; border-bottom: 1px solid #eaecef; }
        h3 { font-size: 1.4em; }

        /* Hyperlink Styling (Highly Visible) */
        a { color: #007bff; text-decoration: none; border-bottom: 1px dashed #007bff; transition: color 0.2s; }
        a:hover { color: #0056b3; border-bottom-style: solid; }

        /* Code Block Styling (Simulated Syntax Highlighting) */
        code, pre { font-family: 'IBM Plex Mono', monospace; background-color: #f6f8fa; border-radius: 6px; }
        pre { padding: 1em; overflow-x: auto; }
        code { padding: 0.2em 0.4em; }

        /* Simulated Highlighting Classes (Basic) */
        .keyword { color: #d73a49; } /* e.g., import, const, async, await */
        .string { color: #22863a; }  /* e.g., "ProofMode" */
        .comment { color: #6a737d; } /* e.g., // comments */
        .type { color: #116999; }    /* e.g., String, Promise */
        .variable { color: #6f42c1; } /* e.g., filePath, promise */
        .function { color: #6f42c1; } /* e.g., generateProof, initialize */
        .operator { color: #000; }   /* e.g., = */

        /* Blockquote for callouts */
        blockquote { border-left: 4px solid #007bff; padding: 0 1.5em; color: #555; background-color: #eaf6ff; margin: 1em 0; border-radius: 4px; }
        blockquote p { margin: 0; }
    </style>
</head>
<body>

    <h1>ProofMode React Native Integration Guide</h1>
    <blockquote>
        <p>This comprehensive technical guide provides specific implementation details, code examples, and best practices for creating a robust ProofMode React Native module that addresses bridging code persistence and build reliability issues.</p>
    </blockquote>

    <h2>ProofMode architecture overview</h2>
    <p>
        <a href="https://proofmode.org/develop/">ProofMode by Guardian Project</a> is a <strong>mature cryptographic media verification system</strong> built around automatic background signing of photos and videos. The current implementation uses native Android development with <strong>libProofMode</strong> (<a href="https://gitlab.com/guardianproject/proofmode-android">Android</a>, <a href="https://gitlab.com/guardianproject/proofmode-ios">iOS</a>) providing core cryptographic functionality through <span class="keyword">OpenPGP</span> signing, SHA-256 hashing, and sensor data collection.
    </p>

    <p><strong>Core architectural components:</strong></p>
    <ul>
        <li>Background service monitoring MediaStore changes</li>
        <li>PGP keypair generation and management using BouncyCastle</li>
        <li>Sensor data collection (<span class="keyword">GPS</span>, network, device fingerprinting)</li>
        <li>CSV metadata generation with correlating evidence</li>
        <li>Optional <a href="https://c2pa.org/">C2PA</a> (Coalition for Content Provenance and Authenticity) integration</li>
        <li>Hardware attestation via Google SafetyNet API</li>
    </ul>
    <p>The system generates <strong>proof packages</strong> containing original media, cryptographic signatures (.asc files), sensor metadata (CSV format), and optional blockchain timestamps through <a href="https://opentimestamps.org/">OpenTimestamps</a> integration.</p>

    <h2>React Native native module architecture for persistent bridging</h2>
    <p>
        Modern <a href="https://reactnative.dev/">React Native</a> development should prioritize the <strong>New Architecture (0.76+)</strong> which eliminates many traditional bridging issues through direct JavaScript-to-native communication via JSI (JavaScript Interface).
    </p>

    <h3>Bridging persistence strategy</h3>
    <p><strong>Codegen-based interface generation</strong> prevents build deletion issues by automatically generating platform-specific interfaces from TypeScript specifications:</p>
    <pre><code><span class="comment">// ProofModeSpec.ts - Type-safe interface specification</span>
<span class="keyword">import</span> { TurboModule } <span class="keyword">from</span> <span class="string">'react-native'</span>;

<span class="keyword">export interface</span> Spec <span class="keyword">extends</span> <span class="type">TurboModule</span> {
  <span class="function">initialize</span>(): <span class="type">Promise</span>&lt;boolean&gt;;
  <span class="function">generateProof</span>(mediaUri: <span class="type">string</span>): <span class="type">Promise</span>&lt;ProofResult&gt;;
  <span class="function">getProofMetadata</span>(proofHash: <span class="type">string</span>): <span class="type">Promise</span>&lt;MetadataResult&gt;;
  <span class="function">enableBackgroundMonitoring</span>(enabled: <span class="type">boolean</span>): <span class="type">Promise</span>&lt;void&gt;;
  <span class="function">exportProofPackage</span>(mediaUris: <span class="type">string</span>[]): <span class="type">Promise</span>&lt;<span class="type">string</span>&gt;;
}

<span class="keyword">export default</span> TurboModuleRegistry.<span class="function">getEnforcing</span>&lt;Spec&gt;(<span class="string">'ProofMode'</span>);
</code></pre>

    <p><strong>Dual architecture support</strong> ensures compatibility across React Native versions through conditional compilation:</p>
    <pre><code><span class="comment">// Android - ProofModeModule.java</span>
<span class="keyword">public class</span> ProofModeModule <span class="keyword">extends</span> ReactContextBaseJavaModule {
    <span class="keyword">@Override</span>
    <span class="keyword">public</span> <span class="type">String</span> getName() {
        <span class="keyword">return</span> <span class="string">"ProofMode"</span>;
    }
    
    <span class="comment">// Legacy bridge support</span>
    <span class="keyword">@ReactMethod</span>
    <span class="keyword">public void</span> generateProof(<span class="type">String</span> mediaUri, <span class="type">Promise</span> promise) {
        performProofGeneration(mediaUri, promise);
    }
    
    <span class="comment">// New architecture support</span>
    #ifdef RCT_NEW_ARCH_ENABLED
    <span class="keyword">@Override</span>
    <span class="keyword">public</span> NativeProofModeSpec getSpec() {
        <span class="keyword">return new</span> NativeProofModeSpecImpl(<span class="keyword">this</span>);
    }
    #endif
}
</code></pre>

    <h3>Background service integration pattern</h3>
    <p>ProofMode's core strength lies in <strong>background operation</strong>. React Native integration requires careful handling of background services:</p>
    <pre><code><span class="comment">// BackgroundProofService.java</span>
<span class="keyword">public class</span> BackgroundProofService <span class="keyword">extends</span> ReactContextBaseJavaModule 
    <span class="keyword">implements</span> LifecycleEventListener {
    
    <span class="keyword">private</span> ProofModeService proofService;
    
    <span class="keyword">@ReactMethod</span>
    <span class="keyword">public void</span> enableBackgroundCapture(<span class="type">Promise</span> promise) {
        <span class="keyword">try</span> {
            <span class="type">Intent</span> serviceIntent = <span class="keyword">new</span> <span class="type">Intent</span>(getReactApplicationContext(), 
                                            ProofModeService.class);
            getReactApplicationContext().startService(serviceIntent);
            
            <span class="comment">// Register media observer</span>
            <span class="type">ContentObserver</span> mediaObserver = <span class="keyword">new</span> MediaStoreObserver();
            getReactApplicationContext().getContentResolver()
                .registerContentObserver(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, 
                                       <span class="keyword">true</span>, mediaObserver);
            promise.resolve(<span class="keyword">true</span>);
        } <span class="keyword">catch</span> (<span class="type">Exception</span> e) {
            promise.reject(<span class="string">"BACKGROUND_SERVICE_ERROR"</span>, e.getMessage());
        }
    }
}
</code></pre>

    <h2>Cryptographic functionality bridging patterns</h2>
    <p><strong>High-performance cryptographic operations</strong> require native implementation using established React Native crypto libraries and ProofMode's existing cryptographic infrastructure.</p>

    <h3>Core cryptographic integration</h3>
    <pre><code><span class="comment">// ProofModeCore.ts - Core cryptographic operations</span>
<span class="keyword">import</span> <span class="type">QuickCrypto</span> <span class="keyword">from</span> <span class="string">'react-native-quick-crypto'</span>;
<span class="keyword">import</span> * <span class="keyword">as</span> <span class="type">Keychain</span> <span class="keyword">from</span> <span class="string">'react-native-keychain'</span>;
<span class="keyword">import</span> { NativeModules } <span class="keyword">from</span> <span class="string">'react-native'</span>;

<span class="keyword">const</span> { ProofModeNative } <span class="operator">=</span> NativeModules;

<span class="keyword">export class</span> ProofModeCore {
  <span class="keyword">private static</span> instance: ProofModeCore;
  <span class="keyword">private</span> pgpKeyPair: <span class="type">any</span>;
  
  <span class="keyword">async</span> <span class="function">initialize</span>(): <span class="type">Promise</span>&lt;<span class="type">void</span>&gt; {
    <span class="comment">// Retrieve or generate PGP keypair</span>
    <span class="keyword">this</span>.pgpKeyPair <span class="operator">=</span> <span class="keyword">await</span> <span class="keyword">this</span>.<span class="function">getOrCreateKeypair</span>();
    
    <span class="comment">// Initialize native ProofMode library</span>
    <span class="keyword">await</span> ProofModeNative.<span class="function">initializeWithKey</span>(<span class="keyword">this</span>.pgpKeyPair.publicKey);
  }
  
  <span class="keyword">async</span> <span class="function">generateProof</span>(mediaUri: <span class="type">string</span>): <span class="type">Promise</span>&lt;ProofResult&gt; {
    <span class="comment">// Generate SHA-256 hash using high-performance crypto</span>
    <span class="keyword">const</span> fileData <span class="operator">=</span> <span class="keyword">await</span> RNFS.<span class="function">readFile</span>(mediaUri, <span class="string">'base64'</span>);
    <span class="keyword">const</span> hash <span class="operator">=</span> <span class="type">QuickCrypto</span>.<span class="function">createHash</span>(<span class="string">'sha256'</span>)
      .<span class="function">update</span>(fileData, <span class="string">'base64'</span>)
      .<span class="function">digest</span>(<span class="string">'hex'</span>);
    
    <span class="comment">// Collect sensor data through native module</span>
    <span class="keyword">const</span> sensorData <span class="operator">=</span> <span class="keyword">await</span> ProofModeNative.<span class="function">collectSensorData</span>();
    
    <span class="comment">// Generate metadata CSV</span>
    <span class="keyword">const</span> metadata <span class="operator">=</span> <span class="keyword">this</span>.<span class="function">generateMetadataCSV</span>(hash, sensorData);
    
    <span class="comment">// Create PGP signature</span>
    <span class="keyword">const</span> signatureData <span class="operator">=</span> hash <span class="operator">+</span> JSON.<span class="function">stringify</span>(sensorData);
    <span class="keyword">const</span> signature <span class="operator">=</span> <span class="keyword">await</span> <span class="keyword">this</span>.<span class="function">signWithPGP</span>(signatureData);
    
    <span class="keyword">return</span> {
      hash,
      metadata,
      signature,
      timestamp: <span class="type">Date</span>.<span class="function">now</span>(),
      proofDirectory: <span class="keyword">await</span> ProofModeNative.<span class="function">getProofDir</span>(hash)
    };
  }
  
  <span class="keyword">private async</span> <span class="function">getOrCreateKeypair</span>(): <span class="type">Promise</span>&lt;<span class="type">any</span>&gt; {
    <span class="keyword">try</span> {
      <span class="comment">// Attempt to retrieve existing keypair from secure storage</span>
      <span class="keyword">const</span> credentials <span class="operator">=</span> <span class="keyword">await</span> <span class="type">Keychain</span>.<span class="function">getGenericPassword</span>({
        service: <span class="string">'ProofMode_PGP_Keys'</span>,
        accessControl: <span class="type">Keychain</span>.ACCESS_CONTROL.BIOMETRY_CURRENT_SET
      });
      
      <span class="keyword">if</span> (credentials) {
        <span class="keyword">return</span> JSON.<span class="function">parse</span>(credentials.password);
      }
    } <span class="keyword">catch</span> (error) {
      <span class="type">console</span>.<span class="function">log</span>(<span class="string">'No existing keypair found, generating new one'</span>);
    }
    
    <span class="comment">// Generate new PGP keypair using native implementation</span>
    <span class="keyword">const</span> keypair <span class="operator">=</span> <span class="keyword">await</span> ProofModeNative.<span class="function">generatePGPKeypair</span>({
      userEmail: <span class="string">'user@proofmode.app'</span>,
      keySize: <span class="number">2048</span>,
      passphrase: <span class="keyword">await</span> <span class="keyword">this</span>.<span class="function">generateSecurePassphrase</span>()
    });
    
    <span class="comment">// Store securely in keychain</span>
    <span class="keyword">await</span> <span class="type">Keychain</span>.<span class="function">setGenericPassword</span>(<span class="string">'ProofMode_PGP'</span>, JSON.<span class="function">stringify</span>(keypair), {
      service: <span class="string">'ProofMode_PGP_Keys'</span>,
      accessControl: <span class="type">Keychain</span>.ACCESS_CONTROL.BIOMETRY_CURRENT_SET,
      authenticationType: <span class="type">Keychain</span>.AUTHENTICATION_TYPE.BIOMETRICS
    });
    
    <span class="keyword">return</span> keypair;
  }
}
</code></pre>

    <h3>Advanced cryptographic features</h3>
    <p><strong>Hardware-backed security</strong> integration for enhanced trust:</p>
    <pre><code><span class="comment">// Android - CryptographicModule.java</span>
<span class="keyword">public class</span> CryptographicModule <span class="keyword">extends</span> ReactContextBaseJavaModule {
    <span class="keyword">private static final</span> <span class="type">String</span> ANDROID_KEYSTORE = <span class="string">"AndroidKeyStore"</span>;
    <span class="keyword">private</span> KeyStore keyStore;
    
    <span class="keyword">@ReactMethod</span>
    <span class="keyword">public void</span> generateHardwareBackedKey(<span class="type">String</span> alias, <span class="type">Promise</span> promise) {
        <span class="keyword">try</span> {
            KeyGenerator keyGenerator = KeyGenerator.<span class="function">getInstance</span>(
                KeyProperties.KEY_ALGORITHM_AES, ANDROID_KEYSTORE);
                
            KeyGenParameterSpec keyGenParameterSpec = <span class="keyword">new</span> KeyGenParameterSpec.<span class="function">Builder</span>(
                alias, KeyProperties.PURPOSE_ENCRYPT <span class="operator">|</span> KeyProperties.PURPOSE_DECRYPT)
                .<span class="function">setBlockModes</span>(KeyProperties.BLOCK_MODE_GCM)
                .<span class="function">setEncryptionPaddings</span>(KeyProperties.ENCRYPTION_PADDING_NONE)
                .<span class="function">setUserAuthenticationRequired</span>(<span class="keyword">true</span>)
                .<span class="function">setUserAuthenticationValidityDurationSeconds</span>(<span class="number">60</span>)
                .<span class="function">build</span>();
                
            keyGenerator.init(keyGenParameterSpec);
            <span class="type">SecretKey</span> secretKey = keyGenerator.generateKey();
            
            promise.resolve(<span class="string">"Hardware key generated successfully"</span>);
        } <span class="keyword">catch</span> (<span class="type">Exception</span> e) {
            promise.reject(<span class="string">"HARDWARE_KEY_ERROR"</span>, e.getMessage());
        }
    }
}
</code></pre>

    <h2>Auto-linking configuration for build persistence</h2>
    <p><strong>Robust auto-linking configuration</strong> prevents common build deletion issues and ensures consistent module discovery across development cycles.</p>

    <h3>Package.json configuration</h3>
    <pre><code>{
  <span class="string">"name"</span>: <span class="string">"react-native-proofmode"</span>,
  <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,
  <span class="string">"description"</span>: <span class="string">"ProofMode integration for React Native"</span>,
  <span class="string">"main"</span>: <span class="string">"lib/index.js"</span>,
  <span class="string">"module"</span>: <span class="string">"src/index.ts"</span>,
  <span class="string">"types"</span>: <span class="string">"lib/index.d.ts"</span>,
  <span class="string">"react-native"</span>: <span class="string">"src/index.ts"</span>,
  <span class="string">"keywords"</span>: [<span class="string">"react-native"</span>, <span class="string">"proofmode"</span>, <span class="string">"verification"</span>, <span class="string">"cryptography"</span>],
  <span class="string">"peerDependencies"</span>: {
    <span class="string">"react"</span>: <span class="string">"*"</span>,
    <span class="string">"react-native"</span>: <span class="string">"&gt;=0.76.0"</span>
  },
  <span class="string">"dependencies"</span>: {
    <span class="string">"react-native-quick-crypto"</span>: <span class="string">"^0.7.0"</span>,
    <span class="string">"react-native-keychain"</span>: <span class="string">"^8.1.2"</span>,
    <span class="string">"react-native-fs"</span>: <span class="string">"^2.20.0"</span>
  },
  <span class="string">"react-native"</span>: {
    <span class="string">"platforms"</span>: {
      <span class="string">"android"</span>: {
        <span class="string">"sourceDir"</span>: <span class="string">"./android"</span>,
        <span class="string">"packageImportPath"</span>: <span class="string">"import com.proofmode.ProofModePackage;"</span>,
        <span class="string">"dependencyConfiguration"</span>: <span class="string">"implementation"</span>
      },
      <span class="string">"ios"</span>: {
        <span class="string">"podspecPath"</span>: <span class="string">"./ios/ProofMode.podspec"</span>
      }
    }
  },
  <span class="string">"codegenConfig"</span>: {
    <span class="string">"name"</span>: <span class="string">"ProofModeSpec"</span>,
    <span class="string">"type"</span>: <span class="string">"modules"</span>,
    <span class="string">"jsSrcsDir"</span>: <span class="string">"src"</span>,
    <span class="string">"android"</span>: {
      <span class="string">"javaPackageName"</span>: <span class="string">"com.proofmode.specs"</span>
    }
  },
  <span class="string">"react-native-builder-bob"</span>: {
    <span class="string">"source"</span>: <span class="string">"src"</span>,
    <span class="string">"output"</span>: <span class="string">"lib"</span>,
    <span class="string">"targets"</span>: [
      <span class="string">"commonjs"</span>,
      <span class="string">"module"</span>,
      <span class="string">"typescript"</span>
    ]
  }
}
</code></pre>

    <h3>Platform-specific build configuration</h3>
    <p><strong>Android Gradle configuration</strong> with ProofMode library integration:</p>
    <pre><code><span class="comment">// android/build.gradle</span>
apply plugin: <span class="string">'com.android.library'</span>
apply plugin: <span class="string">'com.facebook.react'</span>

def getExtOrDefault(name) {
    return rootProject.ext.has(name) ? rootProject.ext.get(name) : project.properties[name]
}

def getExtOrIntegerDefault(name) {
    return rootProject.ext.has(name) ? rootProject.ext.get(name) : (project.properties[name]).toInteger()
}

android {
    compileSdkVersion getExtOrIntegerDefault(<span class="string">'compileSdkVersion'</span>)
    
    defaultConfig {
        minSdkVersion getExtOrIntegerDefault(<span class="string">'minSdkVersion'</span>)
        targetSdkVersion getExtOrIntegerDefault(<span class="string">'targetSdkVersion'</span>)
        versionCode 1
        versionName <span class="string">"1.0"</span>
    }
    
    <span class="comment">// Conditional source sets for architecture compatibility</span>
    sourceSets {
        main {
            if (project.hasProperty(<span class="string">"newArchEnabled"</span>) &amp;&amp; project.newArchEnabled == <span class="string">"true"</span>) {
                java.srcDirs <span class="operator">+=</span> [<span class="string">'src/newarch/java'</span>]
            } <span class="keyword">else</span> {
                java.srcDirs <span class="operator">+=</span> [<span class="string">'src/oldarch/java'</span>]
            }
        }
    }
}

repositories {
    google()
    mavenCentral()
    <span class="comment">// Guardian Project Maven repository for ProofMode</span>
    maven { url <span class="string">"https://raw.githubusercontent.com/guardianproject/gpmaven/master"</span> }
}

dependencies {
    implementation <span class="string">'com.facebook.react:react-native:+'</span>
    
    <span class="comment">// ProofMode dependencies</span>
    implementation <span class="string">'org.witness:android-libproofmode:1.0.18'</span>
    implementation <span class="string">'com.google.android.gms:play-services-safetynet:18.0.1'</span>
    implementation <span class="string">'org.bouncycastle:bcpkix-jdk15to18:1.72'</span>
    implementation <span class="string">'org.bouncycastle:bcprov-jdk15to18:1.72'</span>
    implementation <span class="string">'com.eternitywall:java-opentimestamps:1.20'</span>
}
</code></pre>

    <h3>CocoaPods reliability configuration</h3>
    <pre><code><span class="comment"># ios/Podfile - Reliable pod configuration</span>
require <span class="string">'json'</span>

package <span class="operator">=</span> JSON.<span class="function">parse</span>(File.<span class="function">read</span>(File.<span class="function">join</span>(__dir__, <span class="string">'../package.json'</span>)))

Pod::Spec.<span class="function">new</span> <span class="keyword">do</span> <span class="operator">|</span>s<span class="operator">|</span>
  s.name           <span class="operator">=</span> package[<span class="string">'name'</span>]
  s.version        <span class="operator">=</span> package[<span class="string">'version'</span>]
  s.summary        <span class="operator">=</span> package[<span class="string">'description'</span>]
  s.homepage       <span class="operator">=</span> package[<span class="string">'homepage'</span>]
  s.license        <span class="operator">=</span> package[<span class="string">'license'</span>]
  s.author         <span class="operator">=</span> package[<span class="string">'author'</span>]
  s.platforms      <span class="operator">=</span> { :ios <span class="operator">=&gt;</span> <span class="string">"13.0"</span> }
  s.source         <span class="operator">=</span> { :git <span class="operator">=&gt;</span> package[<span class="string">'repository'</span>], :tag <span class="operator">=&gt;</span> <span class="string">"#{s.version}"</span> }
  
  s.source_files   <span class="operator">=</span> <span class="string">"ios/**/*.{h,m,mm,swift}"</span>
  s.requires_arc   <span class="operator">=</span> <span class="keyword">true</span>
  
  <span class="comment"># React Native dependencies</span>
  s.dependency <span class="string">"React-Core"</span>
  
  <span class="comment"># Cryptographic dependencies</span>
  s.dependency <span class="string">"CryptoKit"</span>
  s.dependency <span class="string">"LocalAuthentication"</span>
  
  <span class="comment"># New Architecture support</span>
  install_modules_dependencies(s)
  
  if ENV[<span class="string">'RCT_NEW_ARCH_ENABLED'</span>] == <span class="string">'1'</span>
    s.compiler_flags <span class="operator">=</span> <span class="string">"-DRCT_NEW_ARCH_ENABLED=1"</span>
    s.pod_target_xcconfig <span class="operator">=</span> {
      <span class="string">"HEADER_SEARCH_PATHS"</span> <span class="operator">=&gt;</span> <span class="string">"\"$(PODS_ROOT)/boost\""</span>,
      <span class="string">"CLANG_CXX_LANGUAGE_STANDARD"</span> <span class="operator">=&gt;</span> <span class="string">"c++17"</span>
    }
  end
<span class="keyword">end</span>
</code></pre>

    <h3>Build script optimization</h3>
    <p><strong>Clean build processes</strong> prevent stale artifacts and ensure consistent builds:</p>
    <pre><code>{
  <span class="string">"scripts"</span>: {
    <span class="string">"clean"</span>: <span class="string">"npx react-native clean"</span>,
    <span class="string">"clean:android"</span>: <span class="string">"cd android &amp;&amp; ./gradlew clean &amp;&amp; ./gradlew cleanBuildCache &amp;&amp; cd .."</span>,
    <span class="string">"clean:ios"</span>: <span class="string">"cd ios &amp;&amp; rm -rf build &amp;&amp; pod cache clean --all &amp;&amp; pod install &amp;&amp; cd .."</span>,
    <span class="string">"clean:codegen"</span>: <span class="string">"rm -rf android/app/build/generated &amp;&amp; rm -rf ios/build/generated"</span>,
    <span class="string">"codegen:android"</span>: <span class="string">"./android/gradlew -p android generateCodegenArtifactsFromSchema"</span>,
    <span class="string">"codegen:ios"</span>: <span class="string">"node node_modules/react-native/scripts/generate-codegen-artifacts.js --path . --outputPath ./ios/build/generated/ios --targetPlatform ios"</span>,
    <span class="string">"rebuild"</span>: <span class="string">"npm run clean &amp;&amp; npm run codegen:android &amp;&amp; npm run codegen:ios &amp;&amp; npm install"</span>,
    <span class="string">"prepare"</span>: <span class="string">"bob build"</span>
  }
}
</code></pre>

    <h2>Modern native module template implementation</h2>
    <p><strong>Using create-react-native-library</strong> provides the most robust foundation for ProofMode integration:</p>
    <pre><code><span class="comment"># Initialize ProofMode React Native module</span>
npx create-react-native-library@latest react-native-proofmode \
  --slug react-native-proofmode \
  --description <span class="string">"ProofMode cryptographic verification for React Native"</span> \
  --author-name <span class="string">"Your Name"</span> \
  --author-email <span class="string">"your.email@example.com"</span> \
  --github-url <span class="string">"https://github.com/your-org/react-native-proofmode"</span> \
  --type module-mixed \
  --languages kotlin-swift
</code></pre>

    <h3>TypeScript interface design</h3>
    <p><strong>Comprehensive ProofMode interface</strong> with proper error handling and type safety:</p>
    <pre><code><span class="comment">// src/types.ts</span>
<span class="keyword">export interface</span> ProofResult {
  hash: <span class="type">string</span>;
  metadata: SensorMetadata;
  signature: <span class="type">string</span>;
  timestamp: <span class="type">number</span>;
  proofDirectory: <span class="type">string</span>;
  c2paManifest?: <span class="type">string</span>;
}

<span class="keyword">export interface</span> SensorMetadata {
  location?: {
    latitude: <span class="type">number</span>;
    longitude: <span class="type">number</span>;
    accuracy: <span class="type">number</span>;
    timestamp: <span class="type">number</span>;
  };
  network: {
    type: <span class="string">'wifi'</span> | <span class="string">'cellular'</span> | <span class="string">'none'</span>;
    ssid?: <span class="type">string</span>;
    cellTowerId?: <span class="type">string</span>;
  };
  device: {
    model: <span class="type">string</span>;
    manufacturer: <span class="type">string</span>;
    osVersion: <span class="type">string</span>;
    appVersion: <span class="type">string</span>;
    deviceId: <span class="type">string</span>;
  };
  sensors: {
    accelerometer?: [number, number, number];
    gyroscope?: [number, number, number];
    magnetometer?: [number, number, number];
  };
}

<span class="keyword">export interface</span> ProofModeConfig {
  enableBackgroundCapture: <span class="type">boolean</span>;
  sensorDataCollection: (<span class="string">'location'</span> | <span class="string">'network'</span> | <span class="string">'device'</span> | <span class="string">'sensors'</span>)[];
  signatureMethod: <span class="string">'pgp'</span> | <span class="string">'simple_hash'</span>;
  notarization?: {
    safetyNet: <span class="type">boolean</span>;
    openTimestamps: <span class="type">boolean</span>;
  };
}

<span class="keyword">export enum</span> ProofModeError {
  INITIALIZATION_FAILED <span class="operator">=</span> <span class="string">'INITIALIZATION_FAILED'</span>,
  CRYPTOGRAPHIC_ERROR <span class="operator">=</span> <span class="string">'CRYPTOGRAPHIC_ERROR'</span>,
  PERMISSION_DENIED <span class="operator">=</span> <span class="string">'PERMISSION_DENIED'</span>,
  STORAGE_ERROR <span class="operator">=</span> <span class="string">'STORAGE_ERROR'</span>,
  NETWORK_ERROR <span class="operator">=</span> <span class="string">'NETWORK_ERROR'</span>
}
</code></pre>

    <h3>Native Android implementation</h3>
    <p><strong>Complete Android module implementation</strong> integrating libProofMode:</p>
    <pre><code><span class="comment">// android/src/main/java/com/proofmode/ProofModeModule.java</span>
<span class="keyword">package</span> com.proofmode;

import android.content.Context;
import android.net.Uri;
import com.facebook.react.bridge.*;
import com.facebook.react.modules.core.DeviceEventManagerModule;
import org.witness.proofmode.ProofMode;
import org.witness.proofmode.ProofModeConstants;
import java.io.File;
import java.util.HashMap;
import java.util.Map;

<span class="keyword">public class</span> ProofModeModule <span class="keyword">extends</span> ReactContextBaseJavaModule {
    <span class="keyword">private static final</span> <span class="type">String</span> NAME = <span class="string">"ProofMode"</span>;
    <span class="keyword">private</span> ReactApplicationContext reactContext;
    <span class="keyword">private boolean</span> isInitialized = <span class="keyword">false</span>;

    <span class="keyword">public</span> <span class="function">ProofModeModule</span>(ReactApplicationContext reactContext) {
        <span class="keyword">super</span>(reactContext);
        <span class="keyword">this</span>.reactContext = reactContext;
    }

    <span class="keyword">@Override</span>
    <span class="keyword">public</span> <span class="type">String</span> getName() {
        <span class="keyword">return</span> NAME;
    }

    <span class="keyword">@ReactMethod</span>
    <span class="keyword">public void</span> initialize(ReadableMap config, <span class="type">Promise</span> promise) {
        <span class="keyword">try</span> {
            <span class="comment">// Initialize ProofMode library</span>
            <span class="type">Context</span> context = getReactApplicationContext();
            ProofMode.<span class="function">init</span>(context);
            
            <span class="comment">// Configure based on provided settings</span>
            <span class="keyword">if</span> (config.<span class="function">hasKey</span>(<span class="string">"enableBackgroundCapture"</span>)) {
                <span class="keyword">boolean</span> enabled = config.<span class="function">getBoolean</span>(<span class="string">"enableBackgroundCapture"</span>);
                ProofMode.<span class="function">setEnabled</span>(context, enabled);
            }
            
            isInitialized = <span class="keyword">true</span>;
            promise.<span class="function">resolve</span>(<span class="keyword">true</span>);
        } <span class="keyword">catch</span> (<span class="type">Exception</span> e) {
            promise.<span class="function">reject</span>(<span class="string">"INITIALIZATION_FAILED"</span>, e.getMessage());
        }
    }

    <span class="keyword">@ReactMethod</span>
    <span class="keyword">public void</span> generateProof(<span class="type">String</span> mediaUri, <span class="type">Promise</span> promise) {
        <span class="keyword">if</span> (!isInitialized) {
            promise.<span class="function">reject</span>(<span class="string">"NOT_INITIALIZED"</span>, <span class="string">"ProofMode not initialized"</span>);
            <span class="keyword">return</span>;
        }

        <span class="keyword">try</span> {
            <span class="type">Uri</span> uri = Uri.<span class="function">parse</span>(mediaUri);
            <span class="type">String</span> proofHash = ProofMode.<span class="function">generateProof</span>(getReactApplicationContext(), uri);
            <span class="type">File</span> proofDir = ProofMode.<span class="function">getProofDir</span>(getReactApplicationContext(), proofHash);
            
            <span class="comment">// Collect additional metadata</span>
            <span class="type">WritableMap</span> result = Arguments.<span class="function">createMap</span>();
            result.<span class="function">putString</span>(<span class="string">"hash"</span>, proofHash);
            result.<span class="function">putString</span>(<span class="string">"proofDirectory"</span>, proofDir.getAbsolutePath());
            result.<span class="function">putDouble</span>(<span class="string">"timestamp"</span>, System.<span class="function">currentTimeMillis</span>());
            
            <span class="comment">// Add sensor data if available</span>
            <span class="type">WritableMap</span> sensorData = collectSensorData();
            result.<span class="function">putMap</span>(<span class="string">"metadata"</span>, sensorData);
            
            promise.<span class="function">resolve</span>(result);
        } <span class="keyword">catch</span> (<span class="type">Exception</span> e) {
            promise.<span class="function">reject</span>(<span class="string">"PROOF_GENERATION_ERROR"</span>, e.getMessage());
        }
    }

    <span class="keyword">@ReactMethod</span>
    <span class="keyword">public void</span> exportProofPackage(ReadableArray mediaUris, <span class="type">Promise</span> promise) {
        <span class="keyword">try</span> {
            <span class="comment">// Implementation for creating proof package zip</span>
            <span class="type">String</span> packagePath = createProofPackage(mediaUris);
            promise.<span class="function">resolve</span>(packagePath);
        } <span class="keyword">catch</span> (<span class="type">Exception</span> e) {
            promise.<span class="function">reject</span>(<span class="string">"EXPORT_ERROR"</span>, e.getMessage());
        }
    }

    <span class="keyword">private</span> WritableMap collectSensorData() {
        <span class="type">WritableMap</span> sensorData = Arguments.<span class="function">createMap</span>();
        
        <span class="comment">// Location data</span>
        <span class="type">WritableMap</span> location = Arguments.<span class="function">createMap</span>();
        <span class="comment">// ... implement location collection</span>
        sensorData.<span class="function">putMap</span>(<span class="string">"location"</span>, location);
        
        <span class="comment">// Network data</span>
        <span class="type">WritableMap</span> network = Arguments.<span class="function">createMap</span>();
        <span class="comment">// ... implement network data collection</span>
        sensorData.<span class="function">putMap</span>(<span class="string">"network"</span>, network);
        
        <span class="comment">// Device information</span>
        <span class="type">WritableMap</span> device = Arguments.<span class="function">createMap</span>();
        device.<span class="function">putString</span>(<span class="string">"model"</span>, android.os.Build.MODEL);
        device.<span class="function">putString</span>(<span class="string">"manufacturer"</span>, android.os.Build.MANUFACTURER);
        device.<span class="function">putString</span>(<span class="string">"osVersion"</span>, android.os.Build.VERSION.RELEASE);
        sensorData.<span class="function">putMap</span>(<span class="string">"device"</span>, device);
        
        <span class="keyword">return</span> sensorData;
    }

    <span class="keyword">private void</span> sendEvent(<span class="type">String</span> eventName, WritableMap params) {
        getReactApplicationContext()
            .<span class="function">getJSModule</span>(DeviceEventManagerModule.RCTDeviceEventEmitter.<span class="keyword">class</span>)
            .<span class="function">emit</span>(eventName, params);
    }
}
</code></pre>

    <h2>Build reliability and persistence strategies</h2>
    <p><strong>Comprehensive strategies</strong> to prevent bridging code deletion and ensure reliable builds across development cycles.</p>

    <h3>Gradle optimization patterns</h3>
    <pre><code><span class="comment">// android/gradle.properties - Performance and reliability settings</span>
org.gradle.jvmargs=<span class="string">-Xmx4096m -XX:MaxPermSize=512m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8</span>
org.gradle.parallel=<span class="keyword">true</span>
org.gradle.daemon=<span class="keyword">true</span>
org.gradle.configureondemand=<span class="keyword">true</span>
android.useAndroidX=<span class="keyword">true</span>
android.enableJetifier=<span class="keyword">true</span>

<span class="comment"># New Architecture support</span>
newArchEnabled=<span class="keyword">true</span>
hermesEnabled=<span class="keyword">true</span>
</code></pre>

    <h3>CocoaPods reliability configuration</h3>
    <pre><code><span class="comment"># ios/Podfile - Reliable pod configuration</span>
require <span class="string">'json'</span>

package <span class="operator">=</span> JSON.<span class="function">parse</span>(File.<span class="function">read</span>(File.<span class="function">join</span>(__dir__, <span class="string">'../package.json'</span>)))

Pod::Spec.<span class="function">new</span> <span class="keyword">do</span> <span class="operator">|</span>s<span class="operator">|</span>
  s.name           <span class="operator">=</span> package[<span class="string">'name'</span>]
  s.version        <span class="operator">=</span> package[<span class="string">'version'</span>]
  s.summary        <span class="operator">=</span> package[<span class="string">'description'</span>]
  s.homepage       <span class="operator">=</span> package[<span class="string">'homepage'</span>]
  s.license        <span class="operator">=</span> package[<span class="string">'license'</span>]
  s.author         <span class="operator">=</span> package[<span class="string">'author'</span>]
  s.platforms      <span class="operator">=</span> { :ios <span class="operator">=&gt;</span> <span class="string">"13.0"</span> }
  s.source         <span class="operator">=</span> { :git <span class="operator">=&gt;</span> package[<span class="string">'repository'</span>], :tag <span class="operator">=&gt;</span> <span class="string">"#{s.version}"</span> }
  
  s.source_files   <span class="operator">=</span> <span class="string">"ios/**/*.{h,m,mm,swift}"</span>
  s.requires_arc   <span class="operator">=</span> <span class="keyword">true</span>
  
  <span class="comment"># React Native dependencies</span>
  s.dependency <span class="string">"React-Core"</span>
  
  <span class="comment"># Cryptographic dependencies</span>
  s.dependency <span class="string">"CryptoKit"</span>
  s.dependency <span class="string">"LocalAuthentication"</span>
  
  <span class="comment"># New Architecture support</span>
  install_modules_dependencies(s)
  
  if ENV[<span class="string">'RCT_NEW_ARCH_ENABLED'</span>] == <span class="string">'1'</span>
    s.compiler_flags <span class="operator">=</span> <span class="string">"-DRCT_NEW_ARCH_ENABLED=1"</span>
    s.pod_target_xcconfig <span class="operator">=</span> {
      <span class="string">"HEADER_SEARCH_PATHS"</span> <span class="operator">=&gt;</span> <span class="string">"\"$(PODS_ROOT)/boost\""</span>,
      <span class="string">"CLANG_CXX_LANGUAGE_STANDARD"</span> <span class="operator">=&gt;</span> <span class="string">"c++17"</span>
    }
  end
<span class="keyword">end</span>
</code></pre>

    <h3>Build script optimization</h3>
    <p><strong>Clean build processes</strong> prevent stale artifacts and ensure consistent builds:</p>
    <pre><code>{
  <span class="string">"scripts"</span>: {
    <span class="string">"clean"</span>: <span class="string">"npx react-native clean"</span>,
    <span class="string">"clean:android"</span>: <span class="string">"cd android &amp;&amp; ./gradlew clean &amp;&amp; ./gradlew cleanBuildCache &amp;&amp; cd .."</span>,
    <span class="string">"clean:ios"</span>: <span class="string">"cd ios &amp;&amp; rm -rf build &amp;&amp; pod cache clean --all &amp;&amp; pod install &amp;&amp; cd .."</span>,
    <span class="string">"clean:codegen"</span>: <span class="string">"rm -rf android/app/build/generated &amp;&amp; rm -rf ios/build/generated"</span>,
    <span class="string">"codegen:android"</span>: <span class="string">"./android/gradlew -p android generateCodegenArtifactsFromSchema"</span>,
    <span class="string">"codegen:ios"</span>: <span class="string">"node node_modules/react-native/scripts/generate-codegen-artifacts.js --path . --outputPath ./ios/build/generated/ios --targetPlatform ios"</span>,
    <span class="string">"rebuild"</span>: <span class="string">"npm run clean &amp;&amp; npm run codegen:android &amp;&amp; npm run codegen:ios &amp;&amp; npm install"</span>,
    <span class="string">"prepare"</span>: <span class="string">"bob build"</span>
  }
}
</code></pre>

    <h2>Modern native module template implementation</h2>
    <p><strong>Using create-react-native-library</strong> provides the most robust foundation for ProofMode integration:</p>
    <pre><code><span class="comment"># Initialize ProofMode React Native module</span>
npx create-react-native-library@latest react-native-proofmode \
  --slug react-native-proofmode \
  --description <span class="string">"ProofMode cryptographic verification for React Native"</span> \
  --author-name <span class="string">"Your Name"</span> \
  --author-email <span class="string">"your.email@example.com"</span> \
  --github-url <span class="string">"https://github.com/your-org/react-native-proofmode"</span> \
  --type module-mixed \
  --languages kotlin-swift
</code></pre>

    <h3>TypeScript interface design</h3>
    <p><strong>Comprehensive ProofMode interface</strong> with proper error handling and type safety:</p>
    <pre><code><span class="comment">// src/types.ts</span>
<span class="keyword">export interface</span> ProofResult {
  hash: <span class="type">string</span>;
  metadata: SensorMetadata;
  signature: <span class="type">string</span>;
  timestamp: <span class="type">number</span>;
  proofDirectory: <span class="type">string</span>;
  c2paManifest?: <span class="type">string</span>;
}

<span class="keyword">export interface</span> SensorMetadata {
  location?: {
    latitude: <span class="type">number</span>;
    longitude: <span class="type">number</span>;
    accuracy: <span class="type">number</span>;
    timestamp: <span class="type">number</span>;
  };
  network: {
    type: <span class="string">'wifi'</span> | <span class="string">'cellular'</span> | <span class="string">'none'</span>;
    ssid?: <span class="type">string</span>;
    cellTowerId?: <span class="type">string</span>;
  };
  device: {
    model: <span class="type">string</span>;
    manufacturer: <span class="type">string</span>;
    osVersion: <span class="type">string</span>;
    appVersion: <span class="type">string</span>;
    deviceId: <span class="type">string</span>;
  };
  sensors: {
    accelerometer?: [number, number, number];
    gyroscope?: [number, number, number];
    magnetometer?: [number, number, number];
  };
}

<span class="keyword">export interface</span> ProofModeConfig {
  enableBackgroundCapture: <span class="type">boolean</span>;
  sensorDataCollection: (<span class="string">'location'</span> | <span class="string">'network'</span> | <span class="string">'device'</span> | <span class="string">'sensors'</span>)[];
  signatureMethod: <span class="string">'pgp'</span> | <span class="string">'simple_hash'</span>;
  notarization?: {
    safetyNet: <span class="type">boolean</span>;
    openTimestamps: <span class="type">boolean</span>;
  };
}

<span class="keyword">export enum</span> ProofModeError {
  INITIALIZATION_FAILED <span class="operator">=</span> <span class="string">'INITIALIZATION_FAILED'</span>,
  CRYPTOGRAPHIC_ERROR <span class="operator">=</span> <span class="string">'CRYPTOGRAPHIC_ERROR'</span>,
  PERMISSION_DENIED <span class="operator">=</span> <span class="string">'PERMISSION_DENIED'</span>,
  STORAGE_ERROR <span class="operator">=</span> <span class="string">'STORAGE_ERROR'</span>,
  NETWORK_ERROR <span class="operator">=</span> <span class="string">'NETWORK_ERROR'</span>
}
</code></pre>

    <h3>Native Android implementation</h3>
    <p><strong>Complete Android module implementation</strong> integrating libProofMode:</p>
    <pre><code><span class="comment">// android/src/main/java/com/proofmode/ProofModeModule.java</span>
<span class="keyword">package</span> com.proofmode;

import android.content.Context;
import android.net.Uri;
import com.facebook.react.bridge.*;
import com.facebook.react.modules.core.DeviceEventManagerModule;
import org.witness.proofmode.ProofMode;
import org.witness.proofmode.ProofModeConstants;
import java.io.File;
import java.util.HashMap;
import java.util.Map;

<span class="keyword">public class</span> ProofModeModule <span class="keyword">extends</span> ReactContextBaseJavaModule {
    <span class="keyword">private static final</span> <span class="type">String</span> NAME = <span class="string">"ProofMode"</span>;
    <span class="keyword">private</span> ReactApplicationContext reactContext;
    <span class="keyword">private boolean</span> isInitialized = <span class="keyword">false</span>;

    <span class="keyword">public</span> <span class="function">ProofModeModule</span>(ReactApplicationContext reactContext) {
        <span class="keyword">super</span>(reactContext);
        <span class="keyword">this</span>.reactContext = reactContext;
    }

    <span class="keyword">@Override</span>
    <span class="keyword">public</span> <span class="type">String</span> getName() {
        <span class="keyword">return</span> NAME;
    }

    <span class="keyword">@ReactMethod</span>
    <span class="keyword">public void</span> initialize(ReadableMap config, <span class="type">Promise</span> promise) {
        <span class="keyword">try</span> {
            <span class="comment">// Initialize ProofMode library</span>
            <span class="type">Context</span> context = getReactApplicationContext();
            ProofMode.<span class="function">init</span>(context);
            
            <span class="comment">// Configure based on provided settings</span>
            <span class="keyword">if</span> (config.<span class="function">hasKey</span>(<span class="string">"enableBackgroundCapture"</span>)) {
                <span class="keyword">boolean</span> enabled = config.<span class="function">getBoolean</span>(<span class="string">"enableBackgroundCapture"</span>);
                ProofMode.<span class="function">setEnabled</span>(context, enabled);
            }
            
            isInitialized = <span class="keyword">true</span>;
            promise.<span class="function">resolve</span>(<span class="keyword">true</span>);
        } <span class="keyword">catch</span> (<span class="type">Exception</span> e) {
            promise.<span class="function">reject</span>(<span class="string">"INITIALIZATION_FAILED"</span>, e.getMessage());
        }
    }

    <span class="keyword">@ReactMethod</span>
    <span class="keyword">public void</span> generateProof(<span class="type">String</span> mediaUri, <span class="type">Promise</span> promise) {
        <span class="keyword">if</span> (!isInitialized) {
            promise.<span class="function">reject</span>(<span class="string">"NOT_INITIALIZED"</span>, <span class="string">"ProofMode not initialized"</span>);
            <span class="keyword">return</span>;
        }

        <span class="keyword">try</span> {
            <span class="type">Uri</span> uri = Uri.<span class="function">parse</span>(mediaUri);
            <span class="type">String</span> proofHash = ProofMode.<span class="function">generateProof</span>(getReactApplicationContext(), uri);
            <span class="type">File</span> proofDir = ProofMode.<span class="function">getProofDir</span>(getReactApplicationContext(), proofHash);
            
            <span class="comment">// Collect additional metadata</span>
            <span class="type">WritableMap</span> result = Arguments.<span class="function">createMap</span>();
            result.<span class="function">putString</span>(<span class="string">"hash"</span>, proofHash);
            result.<span class="function">putString</span>(<span class="string">"proofDirectory"</span>, proofDir.getAbsolutePath());
            result.<span class="function">putDouble</span>(<span class="string">"timestamp"</span>, System.<span class="function">currentTimeMillis</span>());
            
            <span class="comment">// Add sensor data if available</span>
            <span class="type">WritableMap</span> sensorData = collectSensorData();
            result.<span class="function">putMap</span>(<span class="string">"metadata"</span>, sensorData);
            
            promise.<span class="function">resolve</span>(result);
        } <span class="keyword">catch</span> (<span class="type">Exception</span> e) {
            promise.<span class="function">reject</span>(<span class="string">"PROOF_GENERATION_ERROR"</span>, e.getMessage());
        }
    }

    <span class="keyword">@ReactMethod</span>
    <span class="keyword">public void</span> exportProofPackage(ReadableArray mediaUris, <span class="type">Promise</span> promise) {
        <span class="keyword">try</span> {
            <span class="comment">// Implementation for creating proof package zip</span>
            <span class="type">String</span> packagePath = createProofPackage(mediaUris);
            promise.<span class="function">resolve</span>(packagePath);
        } <span class="keyword">catch</span> (<span class="type">Exception</span> e) {
            promise.<span class="function">reject</span>(<span class="string">"EXPORT_ERROR"</span>, e.getMessage());
        }
    }

    <span class="keyword">private</span> WritableMap collectSensorData() {
        <span class="type">WritableMap</span> sensorData = Arguments.<span class="function">createMap</span>();
        
        <span class="comment">// Location data</span>
        <span class="type">WritableMap</span> location = Arguments.<span class="function">createMap</span>();
        <span class="comment">// ... implement location collection</span>
        sensorData.<span class="function">putMap</span>(<span class="string">"location"</span>, location);
        
        <span class="comment">// Network data</span>
        <span class="type">WritableMap</span> network = Arguments.<span class="function">createMap</span>();
        <span class="comment">// ... implement network data collection</span>
        sensorData.<span class="function">putMap</span>(<span class="string">"network"</span>, network);
        
        <span class="comment">// Device information</span>
        <span class="type">WritableMap</span> device = Arguments.<span class="function">createMap</span>();
        device.<span class="function">putString</span>(<span class="string">"model"</span>, android.os.Build.MODEL);
        device.<span class="function">putString</span>(<span class="string">"manufacturer"</span>, android.os.Build.MANUFACTURER);
        device.<span class="function">putString</span>(<span class="string">"osVersion"</span>, android.os.Build.VERSION.RELEASE);
        sensorData.<span class="function">putMap</span>(<span class="string">"device"</span>, device);
        
        <span class="keyword">return</span> sensorData;
    }

    <span class="keyword">private void</span> sendEvent(<span class="type">String</span> eventName, WritableMap params) {
        getReactApplicationContext()
            .<span class="function">getJSModule</span>(DeviceEventManagerModule.RCTDeviceEventEmitter.<span class="keyword">class</span>)
            .<span class="function">emit</span>(eventName, params);
    }
}
</code></pre>

    <h2>Build reliability and persistence strategies</h2>
    <p><strong>Comprehensive strategies</strong> to prevent bridging code deletion and ensure reliable builds across development cycles.</p>

    <h3>Gradle optimization patterns</h3>
    <pre><code><span class="comment">// android/gradle.properties - Performance and reliability settings</span>
org.gradle.jvmargs=<span class="string">-Xmx4096m -XX:MaxPermSize=512m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8</span>
org.gradle.parallel=<span class="keyword">true</span>
org.gradle.daemon=<span class="keyword">true</span>
org.gradle.configureondemand=<span class="keyword">true</span>
android.useAndroidX=<span class="keyword">true</span>
android.enableJetifier=<span class="keyword">true</span>

<span class="comment"># New Architecture support</span>
newArchEnabled=<span class="keyword">true</span>
hermesEnabled=<span class="keyword">true</span>
</code></pre>

    <h3>CocoaPods reliability configuration</h3>
    <pre><code><span class="comment"># ios/Podfile - Reliable pod configuration</span>
require <span class="string">'json'</span>

package <span class="operator">=</span> JSON.<span class="function">parse</span>(File.<span class="function">read</span>(File.<span class="function">join</span>(__dir__, <span class="string">'../package.json'</span>)))

Pod::Spec.<span class="function">new</span> <span class="keyword">do</span> <span class="operator">|</span>s<span class="operator">|</span>
  s.name           <span class="operator">=</span> package[<span class="string">'name'</span>]
  s.version        <span class="operator">=</span> package[<span class="string">'version'</span>]
  s.summary        <span class="operator">=</span> package[<span class="string">'description'</span>]
  s.homepage       <span class="operator">=</span> package[<span class="string">'homepage'</span>]
  s.license        <span class="operator">=</span> package[<span class="string">'license'</span>]
  s.author         <span class="operator">=</span> package[<span class="string">'author'</span>]
  s.platforms      <span class="operator">=</span> { :ios <span class="operator">=&gt;</span> <span class="string">"13.0"</span> }
  s.source         <span class="operator">=</span> { :git <span class="operator">=&gt;</span> package[<span class="string">'repository'</span>], :tag <span class="operator">=&gt;</span> <span class="string">"#{s.version}"</span> }
  
  s.source_files   <span class="operator">=</span> <span class="string">"ios/**/*.{h,m,mm,swift}"</span>
  s.requires_arc   <span class="operator">=</span> <span class="keyword">true</span>
  
  <span class="comment"># React Native dependencies</span>
  s.dependency <span class="string">"React-Core"</span>
  
  <span class="comment"># Cryptographic dependencies</span>
  s.dependency <span class="string">"CryptoKit"</span>
  s.dependency <span class="string">"LocalAuthentication"</span>
  
  <span class="comment"># New Architecture support</span>
  install_modules_dependencies(s)
  
  if ENV[<span class="string">'RCT_NEW_ARCH_ENABLED'</span>] == <span class="string">'1'</span>
    s.compiler_flags <span class="operator">=</span> <span class="string">"-DRCT_NEW_ARCH_ENABLED=1"</span>
    s.pod_target_xcconfig <span class="operator">=</span> {
      <span class="string">"HEADER_SEARCH_PATHS"</span> <span class="operator">=&gt;</span> <span class="string">"\"$(PODS_ROOT)/boost\""</span>,
      <span class="string">"CLANG_CXX_LANGUAGE_STANDARD"</span> <span class="operator">=&gt;</span> <span class="string">"c++17"</span>
    }
  end
<span class="keyword">end</span>
</code></pre>

    <h2>Integration with Phenom App architecture</h2>
    <p>For Project Peregrine specifically, ProofMode integration should align with the existing React Native and Expo.dev architecture:</p>

    <h3>Expo compatibility considerations</h3>
    <pre><code><span class="comment">// expo-plugins/proofmode-plugin.js - Custom Expo plugin</span>
const { withDangerousMod, withPlugins } = require(<span class="string">'@expo/config-plugins'</span>);

const withProofMode = (config) =&gt; {
  return withDangerousMod(config, [
    <span class="string">'android'</span>,
    async (config) =&gt; {
      <span class="comment">// Add ProofMode gradle dependencies</span>
      <span class="comment">// Configure background service permissions</span>
      return config;
    },
  ]);
};

module.exports = withProofMode;
</code></pre>

    <h3>EAS Build configuration</h3>
    <pre><code>{
  <span class="string">"build"</span>: {
    <span class="string">"development"</span>: {
      <span class="string">"developmentClient"</span>: <span class="keyword">true</span>,
      <span class="string">"distribution"</span>: <span class="string">"internal"</span>,
      <span class="string">"env"</span>: {
        <span class="string">"PROOFMODE_ENABLED"</span>: <span class="string">"true"</span>
      }
    },
    <span class="string">"preview"</span>: {
      <span class="string">"distribution"</span>: <span class="string">"internal"</span>,
      <span class="string">"env"</span>: {
        <span class="string">"PROOFMODE_ENABLED"</span>: <span class="string">"true"</span>
      }
    },
    <span class="string">"production"</span>: {
      <span class="string">"env"</span>: {
        <span class="string">"PROOFMODE_ENABLED"</span>: <span class="string">"true"</span>
      }
    }
  }
}
</code></pre>
    <p>This comprehensive implementation guide provides a robust foundation for integrating ProofMode's cryptographic verification capabilities into React Native applications while addressing common build persistence issues through modern architecture patterns, proper auto-linking configuration, and comprehensive error handling strategies.</p>

</body>
</html>
